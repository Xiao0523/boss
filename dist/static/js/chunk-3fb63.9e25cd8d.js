(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3fb63"],{"/gw5":function(t,e,a){"use strict";var n=a("C38W");a.n(n).a},"0tVQ":function(t,e,a){a("FlQf"),a("VJsP"),t.exports=a("WEpk").Array.from},C38W:function(t,e,a){},FyfS:function(t,e,a){t.exports={default:a("Rp86"),__esModule:!0}},IP1Z:function(t,e,a){"use strict";var n=a("2faE"),r=a("rr1i");t.exports=function(t,e,a){e in t?n.f(t,e,r(0,a)):t[e]=a}},Rp86:function(t,e,a){a("bBy9"),a("FlQf"),t.exports=a("fXsU")},VJsP:function(t,e,a){"use strict";var n=a("2GTP"),r=a("Y7ZC"),i=a("JB68"),s=a("sNwI"),o=a("NwJ3"),l=a("tEej"),u=a("IP1Z"),c=a("fNZA");r(r.S+r.F*!a("TuGD")(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,r,d,f=i(t),m="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,h=void 0!==v,b=0,g=c(f);if(h&&(v=n(v,p>2?arguments[2]:void 0,2)),void 0==g||m==Array&&o(g))for(a=new m(e=l(f.length));e>b;b++)u(a,b,h?v(f[b],b):f[b]);else for(d=g.call(f),a=new m;!(r=d.next()).done;b++)u(a,b,h?s(d,v,[r.value,b],!0):r.value);return a.length=b,a}})},Yvow:function(t,e,a){"use strict";var n=a("dFXO");a.n(n).a},ac6V:function(t,e,a){"use strict";a.d(e,"b",function(){return r}),a.d(e,"c",function(){return i}),a.d(e,"a",function(){return s});var n=a("+WsE");function r(t){return n.a.post("/training/banners",t)}function i(t){var e=t.id;return n.a.get("/training/banner/"+e)}function s(t){return n.a.post("/training/banner",t)}},"bwM+":function(t,e,a){"use strict";a.r(e);var n=a("FyfS"),r=a.n(n),i=a("ac6V"),s=a("xGbm"),o=a("u8Kd"),l=a("i3u+"),u=a("+WsE");var c={name:"TalentSelect",props:{defaultValue:{type:String,default:function(){return""}}},data:function(){return{classList:[],talentId:""}},watch:{defaultValue:function(){this.talentId=this.defaultValue}},mounted:function(){this.talentId=this.defaultValue,this.getList()},methods:{getList:function(){var t=this;(function(t){return u.a.get("/training/common/getTrainingTalentShow",t)})().then(function(e){if(e.data.code)return e.data.message&&t.$wran(e.data.message);if(e.data.data){var a=e.data.data;t.classList=a}})},editClass:function(){this.$emit("talentSelect",this.talentId)}}},d=(a("/gw5"),a("KHd+")),f=Object(d.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-select",{attrs:{placeholder:"请输入关键词"},on:{change:t.editClass},model:{value:t.talentId,callback:function(e){t.talentId=e},expression:"talentId"}},t._l(t.classList,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})}))],1)},[],!1,null,"066e420e",null);f.options.__file="index.vue";var m=f.exports,p={name:"BannerEdit",components:{classSelect:l.a,talentShowSelect:m},data:function(){return{UploadUrl:o.a,time:"",visible:!1,uploadList:[{value:"首页",label:0},{value:"才艺秀",label:1}],uploadStr:"",form:{type:0,bannerPic:"",orderIndex:"",bannerDescription:"",curriculumId:"",trainingTalentShowId:""},selectStr:"",isAdd:!0}},watch:{time:function(){var t=this.time;this.form.beginTime=Object(s.a)(t[0].getTime()),this.form.endTime=Object(s.a)(t[1].getTime())},form:{handler:function(){this.selectStr=0===this.form.type?"课程":1===this.form.type?"活动":"其他"},deep:!0}},created:function(){var t=this.$route.query.id;t&&(this.isAdd=!1,this.getView(t))},methods:{saveClass:function(t){this.form.curriculumId=t},saveTalent:function(t){this.form.trainingTalentShowId=t},handleSuccess:function(t,e){this.form.bannerPic=t.data},beforeUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传图片只能是 JPG 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),e&&a},editSelect:function(t,e){this.form[e]=t},onSubmit:function(){var t=this,e=this.form;Object(i.a)(e).then(function(e){if(e.data.code)return e.data.message&&t.$wran(e.data.message);e.data.data&&(t.$success("提交成功！"),t.$router.push({name:"BannerList"}))})},getView:function(t){var e=this,a={id:t};Object(i.c)(a).then(function(t){if(t.data.code)return t.data.message&&e.$wran(t.data.message);if(t.data.data){var a=t.data.data;e.form=a;var n=!0,i=!1,s=void 0;try{for(var o,l=r()(e.uploadList);!(n=(o=l.next()).done);n=!0){var u=o.value;if(u.label===Number(e.form.position)){e.uploadStr=u.value;break}}}catch(t){i=!0,s=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw s}}e.time=[new Date(a.beginTime),new Date(a.endTime)]}})}}},v=(a("Yvow"),Object(d.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{ref:"noveForm",staticClass:"novel",attrs:{model:t.form,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"banner位置"}},[a("el-select",{attrs:{placeholder:"上传位置"},on:{change:function(e){t.editSelect(t.uploadStr,"position")}},model:{value:t.uploadStr,callback:function(e){t.uploadStr=e},expression:"uploadStr"}},t._l(t.uploadList,function(t){return a("el-option",{key:t.label,attrs:{label:t.value,value:t.label}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"banner描述"}},[a("el-input",{model:{value:t.form.bannerDescription,callback:function(e){t.$set(t.form,"bannerDescription",e)},expression:"form.bannerDescription"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"banner排序"}},[a("el-input",{model:{value:t.form.orderIndex,callback:function(e){t.$set(t.form,"orderIndex",e)},expression:"form.orderIndex"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{staticClass:"uploader",attrs:{action:t.UploadUrl,"show-file-list":!1,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,name:"multipartFile"}},[t.form.bannerPic?a("img",{staticClass:"avatar",attrs:{src:t.form.bannerPic}}):a("i",{staticClass:"el-icon-picture uploader-icon"})]),t._v(" "),a("input",{attrs:{type:"hidden"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选择时间"}},[a("el-date-picker",{attrs:{"default-time":["12:00:00","08:00:00"],type:"datetimerange",align:"right","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"banner类型"}},[a("el-radio",{attrs:{label:"0"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[t._v("课程")]),t._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[t._v("活动")]),t._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[t._v("其他")])],1),t._v(" "),a("el-form-item",{attrs:{label:t.selectStr}},[a("classSelect",{directives:[{name:"show",rawName:"v-show",value:0===Number(t.form.type),expression:"Number(form.type) === 0"}],attrs:{"default-store":t.form.storeName,"default-class":t.form.curriculumName,"is-add":t.isAdd},on:{classCb:t.saveClass}}),t._v(" "),a("talentShowSelect",{directives:[{name:"show",rawName:"v-show",value:1===Number(t.form.type),expression:"Number(form.type) === 1"}],attrs:{"default-value":t.form.trainingTalentShowName},on:{talentSelect:t.saveTalent}}),t._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:2===Number(t.form.type),expression:"Number(form.type) === 2"}],attrs:{type:"textarea",resize:"none",rows:"5"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)],1)},[],!1,null,"5929596f",null));v.options.__file="edit.vue";e.default=v.exports},dFXO:function(t,e,a){},"eLE/":function(t,e,a){},fXsU:function(t,e,a){var n=a("5K7Z"),r=a("fNZA");t.exports=a("WEpk").getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},"i3u+":function(t,e,a){"use strict";var n=a("+WsE");var r={name:"ClassSelect",props:{defaultClass:{type:String,default:function(){return""}},defaultStore:{type:String,default:function(){return""}},isAdd:{type:Boolean,default:function(){return!0}}},data:function(){return{loading:!1,options:[],storeId:"",classList:[],classId:""}},watch:{storeId:function(){this.getClass()},defaultStore:function(){this.storeId=this.defaultStore,this.getList(this.defaultStore)},defaultClass:function(){this.classId=this.defaultClass}},created:function(){this.defaultStore&&(this.storeId=this.defaultStore,this.getList(this.defaultStore)),this.defaultClass&&(this.classId=this.defaultClass)},methods:{getList:function(t){var e=this;(function(t){var e=t.name;return n.a.get("/training/common/getTrainingCurriculumByName/"+e)})({name:t}).then(function(t){if(t.data.code)return t.data.message&&e.$wran(t.data.message);if(t.data.data){var a=t.data.data;e.options=a,e.isAdd||e.getClass(a[0].id)}})},getClass:function(t){var e=this;(function(t){var e=t.storeId;return n.a.get("/training/common/getTrainingCurriculumByStoreId/"+e)})({storeId:t||this.storeId}).then(function(t){if(t.data.code)return t.data.message&&e.$wran(t.data.message);if(t.data.data){var a=t.data.data;e.classList=a}})},editClass:function(){this.$emit("classCb",this.classId)}}},i=(a("srmt"),a("KHd+")),s=Object(i.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-select",{attrs:{"remote-method":t.getList,loading:t.loading,filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词"},model:{value:t.storeId,callback:function(e){t.storeId=e},expression:"storeId"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{attrs:{placeholder:"请输入关键词"},on:{change:t.editClass},model:{value:t.classId,callback:function(e){t.classId=e},expression:"classId"}},t._l(t.classList,function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})}))],1)},[],!1,null,"0b4f1e85",null);s.options.__file="index.vue";e.a=s.exports},rfXi:function(t,e,a){t.exports={default:a("0tVQ"),__esModule:!0}},srmt:function(t,e,a){"use strict";var n=a("eLE/");a.n(n).a},u8Kd:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return r});var n="https://upload.my51share.com/pic",r="https://upload.my51share.com/file"},xGbm:function(t,e,a){"use strict";a.d(e,"a",function(){return n});a("rfXi"),a("Kw5r");function n(t){var e=new Date(t);return e.getFullYear()+"-"+((e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-")+((e.getDate()<10?"0"+e.getDate():e.getDate())+" ")+((e.getHours()<10?"0"+e.getHours():e.getHours())+":")+((e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":")+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())}}}]);