(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6c61","chunk-57b8"],{"/gw5":function(t,e,n){"use strict";var i=n("C38W");n.n(i).a},"0tVQ":function(t,e,n){n("FlQf"),n("VJsP"),t.exports=n("WEpk").Array.from},C38W:function(t,e,n){},EtCo:function(t,e,n){"use strict";var i=n("kSnL");n.n(i).a},FyfS:function(t,e,n){t.exports={default:n("Rp86"),__esModule:!0}},IP1Z:function(t,e,n){"use strict";var i=n("2faE"),a=n("rr1i");t.exports=function(t,e,n){e in t?i.f(t,e,a(0,n)):t[e]=n}},PERS:function(t,e,n){},Rp86:function(t,e,n){n("bBy9"),n("FlQf"),t.exports=n("fXsU")},VJsP:function(t,e,n){"use strict";var i=n("2GTP"),a=n("Y7ZC"),s=n("JB68"),r=n("sNwI"),o=n("NwJ3"),l=n("tEej"),c=n("IP1Z"),u=n("fNZA");a(a.S+a.F*!n("TuGD")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,a,d,f=s(t),m="function"==typeof this?this:Array,h=arguments.length,p=h>1?arguments[1]:void 0,v=void 0!==p,g=0,b=u(f);if(v&&(p=i(p,h>2?arguments[2]:void 0,2)),void 0==b||m==Array&&o(b))for(n=new m(e=l(f.length));e>g;g++)c(n,g,v?p(f[g],g):f[g]);else for(d=b.call(f),n=new m;!(a=d.next()).done;g++)c(n,g,v?r(d,p,[a.value,g],!0):a.value);return n.length=g,n}})},WlzS:function(t,e,n){},ac6V:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return r});var i=n("+WsE");function a(t){return i.a.post("/training/banners",t)}function s(t){var e=t.id;return i.a.get("/training/banner/"+e)}function r(t){return i.a.post("/training/banner",t)}},"bwM+":function(t,e,n){"use strict";n.r(e);var i=n("FyfS"),a=n.n(i),s=n("ac6V"),r=n("xGbm"),o=n("u8Kd"),l=n("i3u+"),c=n("+WsE");var u={name:"TalentSelect",props:{defaultValue:{type:String,default:function(){return""}}},data:function(){return{classList:[],talentId:""}},watch:{defaultValue:function(){this.talentId=this.defaultValue}},mounted:function(){this.talentId=this.defaultValue,this.getList()},methods:{getList:function(){var t=this;(function(t){return c.a.get("/training/common/getTrainingTalentShow",t)})().then(function(e){if(e.data.code)return e.data.message&&t.$wran(e.data.message);if(e.data.data){var n=e.data.data;t.classList=n}})},editClass:function(){this.$emit("talentSelect",this.talentId)}}},d=(n("/gw5"),n("KHd+")),f=Object(d.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-select",{attrs:{placeholder:"请输入关键词"},on:{change:t.editClass},model:{value:t.talentId,callback:function(e){t.talentId=e},expression:"talentId"}},t._l(t.classList,function(t){return n("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})}))],1)},[],!1,null,"066e420e",null);f.options.__file="index.vue";var m=f.exports,h=n("glbJ"),p={name:"BannerEdit",components:{classSelect:l.a,talentShowSelect:m,Tinymce:h.default},data:function(){return{UploadUrl:o.a,time:"",visible:!1,uploadList:[{value:"首页",label:0},{value:"才艺秀",label:1}],uploadStr:"",form:{type:0,bannerPic:"",orderIndex:"",bannerDescription:"",curriculumId:"",trainingTalentShowId:"",content:""},selectStr:"",isAdd:!0}},watch:{time:function(){var t=this.time;this.form.beginTime=Object(r.a)(t[0].getTime()),this.form.endTime=Object(r.a)(t[1].getTime())},form:{handler:function(){this.selectStr=0===this.form.type?"课程":1===this.form.type?"活动":"其他"},deep:!0}},created:function(){var t=this.$route.query.id;t&&(this.isAdd=!1,this.getView(t))},methods:{saveClass:function(t){this.form.curriculumId=t},saveTalent:function(t){this.form.trainingTalentShowId=t},handleSuccess:function(t,e){this.form.bannerPic=t.data},beforeUpload:function(t){var e="image/jpeg"===t.type,n=t.size/1024/1024<2;return e||this.$message.error("上传图片只能是 JPG 格式!"),n||this.$message.error("上传图片大小不能超过 2MB!"),e&&n},editSelect:function(t,e){this.form[e]=t},onSubmit:function(){var t=this,e=this.form;Object(s.a)(e).then(function(e){if(e.data.code)return e.data.message&&t.$wran(e.data.message);e.data.data&&(t.$success("提交成功！"),t.$router.push({name:"BannerList"}))})},getView:function(t){var e=this,n={id:t};Object(s.c)(n).then(function(t){if(t.data.code)return t.data.message&&e.$wran(t.data.message);if(t.data.data){var n=t.data.data;e.form=n;var i=!0,s=!1,r=void 0;try{for(var o,l=a()(e.uploadList);!(i=(o=l.next()).done);i=!0){var c=o.value;if(c.label===Number(e.form.position)){e.uploadStr=c.value;break}}}catch(t){s=!0,r=t}finally{try{!i&&l.return&&l.return()}finally{if(s)throw r}}e.time=[new Date(n.beginTime),new Date(n.endTime)]}})}}},v=(n("EtCo"),Object(d.a)(p,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{ref:"noveForm",staticClass:"novel",attrs:{model:t.form,"label-position":"left","label-width":"100px"}},[n("el-form-item",{attrs:{label:"banner位置"}},[n("el-select",{attrs:{placeholder:"上传位置"},on:{change:function(e){t.editSelect(t.uploadStr,"position")}},model:{value:t.uploadStr,callback:function(e){t.uploadStr=e},expression:"uploadStr"}},t._l(t.uploadList,function(t){return n("el-option",{key:t.label,attrs:{label:t.value,value:t.label}})}))],1),t._v(" "),n("el-form-item",{attrs:{label:"banner描述"}},[n("el-input",{model:{value:t.form.bannerDescription,callback:function(e){t.$set(t.form,"bannerDescription",e)},expression:"form.bannerDescription"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"banner排序"}},[n("el-input",{model:{value:t.form.orderIndex,callback:function(e){t.$set(t.form,"orderIndex",e)},expression:"form.orderIndex"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"图片"}},[n("el-upload",{staticClass:"uploader",attrs:{action:t.UploadUrl,"show-file-list":!1,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,name:"multipartFile"}},[t.form.bannerPic?n("img",{staticClass:"avatar",attrs:{src:t.form.bannerPic}}):n("i",{staticClass:"el-icon-picture uploader-icon"})]),t._v(" "),n("input",{attrs:{type:"hidden"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"选择时间"}},[n("el-date-picker",{attrs:{"default-time":["12:00:00","08:00:00"],type:"datetimerange",align:"right","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"banner类型"}},[n("el-radio-group",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[n("el-radio",{attrs:{label:"0"}},[t._v("课程")]),t._v(" "),n("el-radio",{attrs:{label:"1"}},[t._v("活动")]),t._v(" "),n("el-radio",{attrs:{label:"2"}},[t._v("其他")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:t.selectStr}},[n("classSelect",{directives:[{name:"show",rawName:"v-show",value:0===Number(t.form.type),expression:"Number(form.type) === 0"}],attrs:{"default-store":t.form.storeName,"default-class":t.form.curriculumName,"is-add":t.isAdd},on:{classCb:t.saveClass}}),t._v(" "),n("talentShowSelect",{directives:[{name:"show",rawName:"v-show",value:1===Number(t.form.type),expression:"Number(form.type) === 1"}],attrs:{"default-value":t.form.trainingTalentShowName},on:{talentSelect:t.saveTalent}}),t._v(" "),n("Tinymce",{directives:[{name:"show",rawName:"v-show",value:2===Number(t.form.type),expression:"Number(form.type) === 2"}],staticClass:"editor-width",model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)],1)},[],!1,null,"fe386934",null));v.options.__file="edit.vue";e.default=v.exports},"eLE/":function(t,e,n){},fXsU:function(t,e,n){var i=n("5K7Z"),a=n("fNZA");t.exports=n("WEpk").getIterator=function(t){var e=a(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},glbJ:function(t,e,n){"use strict";n.r(e);var i=n("4d7F"),a=n.n(i),s=n("GQeE"),r=n.n(s),o=n("u8Kd"),l={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[],UploadUrl:o.a}},methods:{checkAllSuccess:function(){var t=this;return r()(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=r()(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(t,e){for(var n=t.data,i=e.uid,a=r()(this.listObj),s=0,o=a.length;s<o;s++)if(this.listObj[a[s]].uid===i)return this.listObj[a[s]].url=n,void(this.listObj[a[s]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,n=r()(this.listObj),i=0,a=n.length;i<a;i++)if(this.listObj[n[i]].uid===e)return void delete this.listObj[n[i]]},beforeUpload:function(t){var e=this,n=window.URL||window.webkitURL,i=t.uid;return this.listObj[i]={},new a.a(function(a,s){var r=new Image;r.src=n.createObjectURL(t),r.onload=function(){e.listObj[i]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},a(!0)})}}},c=(n("rseW"),n("KHd+")),u=Object(c.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-container"},[n("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片\n  ")]),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:t.UploadUrl,name:"multipartFile","list-type":"picture-card"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)},[],!1,null,"0c2ffd0e",null);u.options.__file="editorImage.vue";var d=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],f=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen fontselect fontsizeselect"],m={name:"Tinymce",components:{editorImage:u.exports},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data:function(){return{includedComponents:"Tinymce",hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"}}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t||"")})},language:function(){var t=this;this.destroyTinymce(),this.$nextTick(function(){return t.initTinymce()})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;window.tinymce.init({language:this.language,selector:"#"+this.tinymceId,height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:f,fontsize_formats:"12px 14px 16px 18px 20px 22px 24px 26px 28px 30px",menubar:this.menubar,plugins:d,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(n){e.value&&n.setContent(e.value),e.hasInit=!0,n.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",n.getContent())})},setup:function(t){t.on("FullscreenStateChanged",function(t){e.fullscreen=t.state})}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'+t.url+'" >')})}}},h=(n("zINK"),Object(c.a)(m,function(){var t=this.$createElement,e=this._self._c||t;return e("section",[e("div",{staticClass:"tinymce-container editor-container",class:{fullscreen:this.fullscreen}},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}}),this._v(" "),e("div",{staticClass:"editor-custom-btn-container"},[e("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:this.imageSuccessCBK}})],1)])])},[],!1,null,"07a26c3a",null));h.options.__file="index.vue";e.default=h.exports},"i3u+":function(t,e,n){"use strict";var i=n("+WsE");var a={name:"ClassSelect",props:{defaultClass:{type:String,default:function(){return""}},defaultStore:{type:String,default:function(){return""}},isAdd:{type:Boolean,default:function(){return!0}}},data:function(){return{loading:!1,options:[],storeId:"",classList:[],classId:""}},watch:{storeId:function(){this.getClass()},defaultStore:function(){this.storeId=this.defaultStore,this.getList(this.defaultStore)},defaultClass:function(){this.classId=this.defaultClass}},created:function(){this.defaultStore&&(this.storeId=this.defaultStore,this.getList(this.defaultStore)),this.defaultClass&&(this.classId=this.defaultClass)},methods:{getList:function(t){var e=this;(function(t){var e=t.name;return i.a.get("/training/common/getTrainingCurriculumByName/"+e)})({name:t}).then(function(t){if(t.data.code)return t.data.message&&e.$wran(t.data.message);if(t.data.data){var n=t.data.data;e.options=n,e.isAdd||e.getClass(n[0].id)}})},getClass:function(t){var e=this;(function(t){var e=t.storeId;return i.a.get("/training/common/getTrainingCurriculumByStoreId/"+e)})({storeId:t||this.storeId}).then(function(t){if(t.data.code)return t.data.message&&e.$wran(t.data.message);if(t.data.data){var n=t.data.data;e.classList=n}})},editClass:function(){this.$emit("classCb",this.classId)}}},s=(n("srmt"),n("KHd+")),r=Object(s.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-select",{attrs:{"remote-method":t.getList,loading:t.loading,filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词"},model:{value:t.storeId,callback:function(e){t.storeId=e},expression:"storeId"}},t._l(t.options,function(t){return n("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})})),t._v(" "),n("el-select",{attrs:{placeholder:"请输入关键词"},on:{change:t.editClass},model:{value:t.classId,callback:function(e){t.classId=e},expression:"classId"}},t._l(t.classList,function(t){return n("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})}))],1)},[],!1,null,"0b4f1e85",null);r.options.__file="index.vue";e.a=r.exports},kSnL:function(t,e,n){},rfXi:function(t,e,n){t.exports={default:n("0tVQ"),__esModule:!0}},rseW:function(t,e,n){"use strict";var i=n("PERS");n.n(i).a},srmt:function(t,e,n){"use strict";var i=n("eLE/");n.n(i).a},u8Kd:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a});var i="https://upload.my51share.com/pic",a="https://upload.my51share.com/file"},xGbm:function(t,e,n){"use strict";n.d(e,"a",function(){return i});n("rfXi"),n("Kw5r");function i(t){var e=new Date(t);return e.getFullYear()+"-"+((e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-")+((e.getDate()<10?"0"+e.getDate():e.getDate())+" ")+((e.getHours()<10?"0"+e.getHours():e.getHours())+":")+((e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":")+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())}},zINK:function(t,e,n){"use strict";var i=n("WlzS");n.n(i).a}}]);