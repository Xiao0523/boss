(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-192c"],{"/SJu":function(e,t,n){"use strict";var o=n("X4Fe");n.n(o).a},"0HWc":function(e,t,n){"use strict";var o=n("e4iO"),i=n("NfTU"),a=n("GToK"),r=n("WJ4c"),s=n("n/80"),c=n("xoMD"),l=n("W+So"),u=n("bmAa");i(i.S+i.F*!n("wfzr")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,d,f=a(e),m="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,p=void 0!==v,g=0,M=u(f);if(p&&(v=o(v,h>2?arguments[2]:void 0,2)),void 0==M||m==Array&&s(M))for(n=new m(t=c(f.length));t>g;g++)l(n,g,p?v(f[g],g):f[g]);else for(d=M.call(f),n=new m;!(i=d.next()).done;g++)l(n,g,p?r(d,v,[i.value,g],!0):i.value);return n.length=g,n}})},16:function(e,t){},17:function(e,t){},18:function(e,t){},"18G4":function(e,t,n){"use strict";n("xGbm");var o={name:"dateTimePicker",props:{startTime:{type:String},endTime:{type:String},type:{type:String,default:"datetime"},format:{type:String,default:"yyyy-MM-dd HH:MM:SS"}},components:{},computed:{},data:function(){return{start:"",end:""}},watch:{startTime:function(e){this.start=e},endTime:function(e){this.end=e},start:function(e){this.$emit("startDateFn",e)},end:function(e){this.$emit("endDateFn",e)}},methods:{},created:function(){}},i=(n("gNFP"),n("ZrdR")),a=Object(i.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.start,callback:function(t){e.start=t},expression:"start"}}),e._v(" "),n("span",[e._v("至")]),e._v(" "),n("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.end,callback:function(t){e.end=t},expression:"end"}})],1)},[],!1,null,"3758990e",null);a.options.__file="index.vue";t.a=a.exports},Gibz:function(e,t,n){},LGhb:function(e,t,n){e.exports={default:n("cm7O"),__esModule:!0}},N6nw:function(e,t,n){"use strict";var o=n("hmiS");n.n(o).a},"W+So":function(e,t,n){"use strict";var o=n("LYHN"),i=n("tt8C");e.exports=function(e,t,n){t in e?o.f(e,t,i(0,n)):e[t]=n}},X4Fe:function(e,t,n){},Yfch:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n("o8UL");n("7MAe"),n("zmnf");function i(e){if(!/^[1][3,4,5,7,8][0-9]{9}$/.test(e))return console.log(e),Object(o.Message)({message:"手机号格式错误",type:"error"})}},cm7O:function(e,t,n){n("Urde"),n("0HWc"),e.exports=n("c01Q").Array.from},gNFP:function(e,t,n){"use strict";var o=n("iMq0");n.n(o).a},hmiS:function(e,t,n){},iMq0:function(e,t,n){},prK7:function(e,t,n){"use strict";n.r(t);var o=n("wE6c"),i=n("Yfch"),a={name:"",components:{},props:{row:{type:Object,default:function(){return{}}}},computed:{},data:function(){return{isShow:!0,id:"",state:"",name:"",phone:"",code:"",verificationCode:"",codeText:"获取验证码",isDisabled:!1,timer:null}},watch:{row:function(e){console.log(e),this.id=e.hdId,console.log(this.hdId),this.state=e.state,console.log(this.state)}},methods:{countDownFn:function(){var e=this;this.codeText=60,this.isDisabled=!0,clearInterval(this.timer),this.timer=setInterval(function(){e.codeText>0&&e.codeText<=60?e.codeText--:(clearInterval(e.timer),e.codeText="重新获取验证码",e.isDisabled=!1)},1e3)},getCodeFn:function(){var e=this;this.phone&&(this.countDownFn(),this.$req.get("getVerificationCode",{phone:this.phone,state:"2"}).then(function(t){e.verificationCode=t.data.data.verificationCode}).catch(function(e){console.log(e)}))},addAdFn:function(){var e=this;this.name&&this.phone&&this.code===this.verificationCode&&this.$req.post("addAdsFromBack",{createby:this.id,name:this.name,state:this.state,phone:this.phone}).then(function(t){e.$success("提交成功")}).catch(function(e){console.log(e)})},checkMobileFn:function(){Object(i.a)(this.phone)},closeFn:function(){this.isShow=!1}},mounted:function(){},created:function(){}},r=(n("q83e"),n("ZrdR")),s=Object(r.a)(a,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isShow?n("div",{staticClass:"btnBox"},[n("p",{staticClass:"close",on:{click:e.closeFn}},[e._v("x")]),e._v(" "),n("p",{staticClass:"row"},[n("span",[e._v("您的姓名（已加密，请您放心填写）")]),e._v(" "),n("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("p",{staticClass:"row"},[n("span",[e._v("您的电话（已加密，请您放心填写）")]),e._v(" "),n("el-input",{attrs:{placeholder:"请输入电话"},on:{blur:function(t){return t.preventDefault(),e.checkMobileFn(t)}},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),n("p",{staticClass:"row"},[n("span",[e._v("手机验证码")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"codeBox",domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),e._v(" "),n("el-button",{staticClass:"btn",attrs:{type:"text",disabled:e.isDisabled},on:{click:e.getCodeFn}},[e._v(e._s(e.codeText)+"(s)")])],1),e._v(" "),n("p",{staticClass:"row"},[n("el-button",{attrs:{type:"primary",round:""},on:{click:e.addAdFn}},[e._v("提交")])],1)]):e._e()},[],!1,null,"18d2fba4",null);s.options.__file="index.vue";var c=s.exports,l=(n("Uwh3"),{name:"ArticleDetails",components:{articleTemplet:o.a,cityPartnerAd:c},computed:{userInfo:function(){return this.$store.getters.userInfo}},data:function(){return{formData:{},row:{},query:{},fenlei:""}},methods:{upDateFrom:function(e){this.formData=e;JSON.parse(this.userInfo).realname;this.editArticleFn()},editArticleFn:function(){var e=this;this.$req.post("updateHuoDong",this.formData).then(function(t){console.log(t),e.$success("更新成功"),e.$router.back()}).catch(function(e){console.log(e)})},initData:function(){var e=this;this.$req.get("huoDongDetail",{id:this.query.id}).then(function(t){e.formData=t.data.data.article;var n=t.data.data.advertisings,o=t.data.data.categories,i=t.data.data.covermaps;e.formData.advIds=n.map(function(e){return e.id}),e.formData.tagids=o.map(function(e){return e.id}),e.formData.covermaps=i,e.row=t.data.data.article}).catch(function(e){console.log(e)})}},created:function(){this.query=this.$route.query,this.fenlei=this.query.fenlei,this.initData()}}),u=(n("/SJu"),Object(r.a)(l,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("articleTemplet",{attrs:{fromMenu:e.formData,advIdArr:e.formData.advIds,tagidArr:e.formData.tagids,source:"edit"},on:{upDateFrom:e.upDateFrom}}),e._v(" "),"城市合伙人"==e.fenlei&&1==e.row.remind?n("cityPartnerAd",{attrs:{row:e.row}}):e._e()],1)},[],!1,null,"7b106d39",null));u.options.__file="index.vue";t.default=u.exports},q83e:function(e,t,n){"use strict";var o=n("Gibz");n.n(o).a},wE6c:function(e,t,n){"use strict";n("Uwh3");var o=n("18G4"),i=n("glbJ"),a=n("DSeF"),r=n("dE+M"),s=n("sUWX"),c=n("4N7J"),l=(n("8t5x"),{name:"ArticleTemplet",components:{dateTimePicker:o.a,Tinymce:i.default,previewDialog:a.a,coverCrop:r.a,twoCover:s.a,threeCover:c.a},props:{source:{type:String},fromMenu:{type:Object,default:function(){return{sharingmaxnum:1e3}}},advIdArr:{type:Array},tagidArr:{type:Array}},data:function(){return{coverArr:[],options:[{value:"热门活动",label:"热门活动"},{value:"城市合伙人",label:"城市合伙人"},{value:"资讯传递",label:"资讯传递"},{value:"视频纷享",label:"视频纷享"}],value:"",labelPosition:"left",advList:[],tagList:[],tagids:[],visible:!1}},computed:{imageUrl:function(){if(this.fromMenu.covermaps){var e=this.fromMenu.covermaps;if(this.coverArr=e,e.length)return e[e.length-1]}},imageUrl1:function(){if(this.fromMenu.covermaps){var e=this.fromMenu.covermaps;if(this.coverArr=e,e.length)return e[0]}},imageUrl2:function(){if(this.fromMenu.covermaps){var e=this.fromMenu.covermaps;if(this.coverArr=e,e.length>1)return e[1]}},imageUrl3:function(){if(this.fromMenu.covermaps){var e=this.fromMenu.covermaps;if(this.coverArr=e,e.length>1)return e[2]}},tag:function(){return"edit"==this.source?(console.log(this.fromMenu),this.tagids=this.fromMenu.tagids,this.fromMenu.tagids):[]}},watch:{fromMenu:{handler:function(e,t){console.log(e)},deep:!0},layout:function(e){2==e&&(this.fromMenu.covermaps=[])}},updated:function(){for(var e=document.getElementsByTagName("img"),t=e.length,n=0;n<t;n++){e[n].style.width="100%"}},created:function(){this.getTagList()},mounted:function(){},methods:{goAdListFn:function(){this.$router.push("/advManager/advList")},uploadFileFn1:function(e){2!==this.fromMenu.layout&&this.coverArr.push(e)},uploadFileFn2:function(e){3==this.fromMenu.layout&&this.coverArr.push(e)},uploadFileFn3:function(e){3==this.fromMenu.layout&&this.coverArr.push(e)},previewArticleFn:function(){this.visible=!0},changeRadio:function(e){},checkFn:function(e){},selectFn:function(e){console.log(e)},addArticleFn:function(){this.fromMenu.tagids=this.tagids;var e=[];0!=this.fromMenu.layout&&1!=this.fromMenu.layout||(console.log(this.coverArr),e=this.coverArr.slice(-1),console.log(console.log(this.coverArr))),3==this.fromMenu.layout&&(e=this.coverArr.splice(-3)),this.fromMenu.covermaps=e,this.$emit("upDateFrom",this.fromMenu)},startDateFn:function(e){this.fromMenu.opentime=e},endDateFn:function(e){this.fromMenu.deadline=e},getTagList:function(){var e=this;this.$req.get("v2/shareCategory/1/999").then(function(t){e.tagList=t.data.data.records}).catch(function(e){console.log(e)})}}}),u=(n("N6nw"),n("ZrdR")),d=Object(u.a)(l,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("section",{staticClass:"top-box"},[n("div",{staticClass:"left"},[n("el-form",{attrs:{"label-position":e.labelPosition,model:e.fromMenu,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"文章标题"}},[n("el-input",{model:{value:e.fromMenu.title,callback:function(t){e.$set(e.fromMenu,"title",t)},expression:"fromMenu.title"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"提成金额"}},[n("el-input",{model:{value:e.fromMenu.money,callback:function(t){e.$set(e.fromMenu,"money",t)},expression:"fromMenu.money"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"来源"}},[n("el-input",{model:{value:e.fromMenu.source,callback:function(t){e.$set(e.fromMenu,"source",t)},expression:"fromMenu.source"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"布局方式"}},[n("el-radio-group",{on:{change:e.changeRadio},model:{value:e.fromMenu.layout,callback:function(t){e.$set(e.fromMenu,"layout",t)},expression:"fromMenu.layout"}},[n("el-radio",{attrs:{label:0}},[e._v("上下图文")]),e._v(" "),n("el-radio",{attrs:{label:1}},[e._v("左右图文")]),e._v(" "),n("el-radio",{attrs:{label:2}},[e._v("无图")]),e._v(" "),n("el-radio",{attrs:{label:3}},[e._v("多图")])],1)],1)],1)],1)]),e._v(" "),n("section",{staticClass:"coverimgBox"},[0==e.fromMenu.layout||1==e.fromMenu.layout?n("coverCrop",{attrs:{"image-url":e.imageUrl},on:{uploadFileFn:e.uploadFileFn1}}):e._e(),e._v(" "),3==e.fromMenu.layout?n("coverCrop",{attrs:{"image-url":e.imageUrl1},on:{uploadFileFn:e.uploadFileFn1}}):e._e(),e._v(" "),3==e.fromMenu.layout?n("twoCover",{attrs:{"image-url":e.imageUrl2},on:{uploadFileFn:e.uploadFileFn2}}):e._e(),e._v(" "),3==e.fromMenu.layout?n("threeCover",{attrs:{"image-url":e.imageUrl3},on:{uploadFileFn:e.uploadFileFn3}}):e._e()],1),e._v(" "),n("section",{staticClass:"relevanceBox"},[n("p",[e._v("关联标签")]),e._v(" "),n("el-checkbox-group",{on:{change:e.checkFn},model:{value:e.tagids,callback:function(t){e.tagids=t},expression:"tagids"}},e._l(e.tagList,function(t,o){return n("el-checkbox",{key:o,attrs:{label:t.id}},[e._v(e._s(t.cname)+"\n      ")])})),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(" "+e._s(e.tag)+e._s(e.tagids))])],1),e._v(" "),n("Tinymce",{model:{value:e.fromMenu.introduce,callback:function(t){e.$set(e.fromMenu,"introduce",t)},expression:"fromMenu.introduce"}}),e._v(" "),n("previewDialog",{attrs:{"is-show":e.visible,title:"预览"},on:{cancelFn:function(t){e.visible=!1},confirmFn:function(t){e.visible=!1}}},[n("section",{staticClass:"previewContent",domProps:{innerHTML:e._s(e.fromMenu.introduce)}})]),e._v(" "),n("el-row",{staticClass:"btn-box"},[n("el-button",{attrs:{type:"warning"},on:{click:e.previewArticleFn}},[e._v("预览")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.addArticleFn}},[e._v("发布")])],1)],1)},[],!1,null,null,null);d.options.__file="index.vue";t.a=d.exports},xGbm:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n("LGhb"),n("Mpsw");function o(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}}}]);