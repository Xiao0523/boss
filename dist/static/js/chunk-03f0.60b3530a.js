(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-03f0"],{"2nNR":function(t,e,n){},"9DK8":function(t,e,n){"use strict";var a=n("2nNR");n.n(a).a},JHrQ:function(t,e,n){"use strict";var a=n("Q61b");n.n(a).a},Paff:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return s});var a=n("+WsE");function i(t){var e=t.talentShowId,n=t.status,i=void 0===n?0:n,o=t.pageNum,s=void 0===o?1:o,r=t.pageSize,l=void 0===r?10:r;return a.a.get("training/trainingTalentShow/composition/"+e+"/"+i+"/"+s+"/"+l)}function o(t){return a.a.post("training/trainingTalentShow/examine",t)}function s(t){var e=t.id;return a.a.get("training/trainingTalentShow/composition/detail/"+e)}},Q61b:function(t,e,n){},SMMm:function(t,e,n){"use strict";var a=n("Uwh3"),i={props:{currentPage:{type:Number},pageSizes:{type:Array,default:function(){return[]}},pageSize:{type:Number},total:{type:Number}},components:{},data:function(){return{isShow:!1}},watch:{total:function(t){console.log("total",t),0!=t&&(this.isShow=!0)}},methods:{handleSizeChange:function(t){Object(a.c)("currentSize",t);var e=Object(a.b)("currentSize");this.$emit("sizeChange",e)},handleCurrentChange:function(t){Object(a.c)("currentPage",t);var e=Object(a.b)("currentPage");this.$emit("currentChange",e)}},mounted:function(){},updated:function(){console.log("分页组件",this.currentPage),console.log("分页组件",this.pageSize)},created:function(){}},o=(n("JHrQ"),n("ZrdR")),s=Object(o.a)(i,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pageBox"},[this.isShow?e("el-pagination",{attrs:{"current-page":this.currentPage,pageSizes:[10,50,100,200,300,400,500],"page-size":this.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:this.total},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}}):this._e()],1)},[],!1,null,"0db06f42",null);s.options.__file="index.vue";e.a=s.exports},Yded:function(t,e,n){var a=n("621g"),i=n("bmAa");t.exports=n("c01Q").getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return a(e.call(t))}},bZdI:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var a=n("+WsE");function i(t){return a.a.get("/training/common/getTrainingTalentShow",t)}function o(t){return a.a.patch("training/trainingTalentShow/composition/votes",t)}},p4Dh:function(t,e,n){"use strict";n.r(e);var a=n("rerW"),i=n.n(a),o=n("Paff"),s=n("bZdI"),r={name:"Tuition",components:{pageNum:n("SMMm").a},filters:{typeStr:function(t){return 0===Number(t)?"图片":"视频"},statusStr:function(t){var e=Number(t);return 0===e?"待审核":1===e?"审核通过":2===e?"审核未通过":"违规"}},data:function(){return{dynamic:0,vote:0,list:[],options:[{value:"0",label:"待审核"},{value:"1",label:"审核通过"},{value:"2",label:"审核未通过"}],keyWord:{type:"",timeRange:""},selectVal:"待处理",status:0,totalNum:null,pageNo:1,pageSize:10,tabHeader:{"background-color":"#F4F4F4",color:"#666666","border-top":"1px solid #BBBBBB","border-bottom":"1px solid #BBBBBB","font-size":"16px","text-align":"center"},diglogFlag:!1,voteFlag:!1,talentId:"",typeVideo:null,voteId:""}},watch:{dynamic:function(){1===Number(this.typeVideo)&&1===Number(this.typeVideo)||(this.$wran("只允许视频设置动态封面！！！"),this.dynamic=0)}},mounted:function(){var t=this.$route.query.id;t||this.$router.push({name:"Show"}),this.talentId=t,this.fetchList()},methods:{selectChange:function(){var t=!0,e=!1,n=void 0;try{for(var a,o=i()(this.options);!(t=(a=o.next()).done);t=!0){var s=a.value;if(s.label===this.selectVal)return this.status=s.value,void this.fetchList()}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}},changeVotes:function(t,e){this.voteFlag=!0,this.vote=t,this.voteId=e},voteSubmit:function(){var t=this,e={id:this.voteId,votes:this.vote};Object(s.a)(e).then(function(e){if(e.data.code)return e.data.message&&t.$warn(e.data.message);t.$success("修改成功！"),t.voteFlag=!1,t.fetchList()})},audit:function(t){this.activeAudit=t,0===Number(t.status)?(this.typeVideo=t.type,this.dynamic=0,this.diglogFlag=!0):this.$message({message:"请选择待审核的数据",type:"warning"})},handelDiglogClick:function(t){if(this.activeAudit.id){var e={ids:[this.activeAudit.id],status:this.activeAudit.status,dynamic:this.dynamic};e.status="success"===t?1:2,this.auditFn(e),this.diglogFlag=!1}},auditFn:function(t){var e=this;Object(o.c)(t).then(function(t){e.$message({message:"操作成功",type:"success"}),e.fetchList()})},sizeChangeFn:function(t){this.pageSize=t,this.fetchList()},currentPageChange:function(t){this.pageNo=t,this.fetchList()},fetchList:function(){var t=this,e={talentShowId:this.talentId,status:this.status,pageNum:this.pageNo,pageSize:this.pageSize||10};Object(o.b)(e).then(function(e){if(e.data.code)return e.data.message&&t.$warn(e.data.message);if(e.data.data){var n=e.data.data;t.totalNum=n.total;var a=n.records;t.list=a&&a.length?a:[]}})},search:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.pageNo=1,e.fetchList())})}}},l=(n("9DK8"),n("ZrdR")),c=Object(l.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",[n("el-select",{on:{change:t.selectChange},model:{value:t.selectVal,callback:function(e){t.selectVal=e},expression:"selectVal"}},t._l(t.options,function(t){return n("el-option",{key:t.label,attrs:{value:t.label}})}))],1),t._v(" "),n("el-table",{staticClass:"table-box",attrs:{data:t.list,"header-cell-style":t.tabHeader,border:""}},[n("el-table-column",{attrs:{align:"center",prop:"id",label:"作品编号"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"talentShowId",label:"才艺秀编号"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"talentShowId",label:"参赛者昵称"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"votes",label:"票数"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"nickName",label:"作品类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("typeStr")(e.row.type))+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("statusStr")(e.row.status))+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{name:"CompositionDetail",query:{id:e.row.id}}}},[n("el-button",{attrs:{size:"mini"}},[t._v("查看")])],1),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){t.audit(e.row)}}},[t._v("审核")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){t.changeVotes(e.row.votes,e.row.id)}}},[t._v("票数管理")])]}}])})],1),t._v(" "),n("div",{staticClass:"pageNumBox"},[n("pageNum",{attrs:{"current-page":t.pageNo,"page-size":t.pageSize,total:t.totalNum},on:{sizeChange:t.sizeChangeFn,currentChange:t.currentPageChange}})],1),t._v(" "),n("el-dialog",{staticClass:"diglog",attrs:{visible:t.voteFlag,title:"票数",width:"30%",center:""},on:{"update:visible":function(e){t.voteFlag=e}}},[n("div",{staticClass:"model-box"},[n("div",{staticClass:"radio-box vote"},[n("span",[t._v("修改票数：")]),t._v(" "),n("el-input",{model:{value:t.vote,callback:function(e){t.vote=e},expression:"vote"}})],1),t._v(" "),n("div",{staticClass:"button-box",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.voteSubmit}},[t._v("确定")]),t._v(" "),n("el-button",{on:{click:function(e){t.voteFlag=!1}}},[t._v("取消")])],1)])]),t._v(" "),n("el-dialog",{staticClass:"diglog",attrs:{visible:t.diglogFlag,title:"审核",width:"30%",center:""},on:{"update:visible":function(e){t.diglogFlag=e}}},[n("div",{staticClass:"model-box"},[n("div",{staticClass:"radio-box"},[n("span",[t._v("是否需要动态封面：")]),t._v(" "),n("el-radio-group",{model:{value:t.dynamic,callback:function(e){t.dynamic=e},expression:"dynamic"}},[n("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),n("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),n("div",{staticClass:"button-box",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handelDiglogClick("success")}}},[t._v("审核通过")]),t._v(" "),n("el-button",{on:{click:function(e){t.handelDiglogClick("unSuccess")}}},[t._v("驳回")])],1)])])],1)},[],!1,null,"31ea1b32",null);c.options.__file="index.vue";e.default=c.exports},"qV/K":function(t,e,n){n("Tpec"),n("Urde"),t.exports=n("Yded")},rerW:function(t,e,n){t.exports={default:n("qV/K"),__esModule:!0}}}]);