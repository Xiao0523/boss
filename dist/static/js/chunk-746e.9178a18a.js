(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-746e"],{"73UT":function(e,t,i){"use strict";i.r(t);var o={name:"",components:{advTemplet:i("WDeH").a},computed:{userInfo:function(){return this.$store.getters.userInfo}},data:function(){return{}},methods:{addFn:function(e){var t=this,i=JSON.parse(this.userInfo).realname;e.creator=i,this.$req.post("v2/shareAdv/add",e).then(function(e){console.log(e),t.$success("添加成功"),t.$router.back()}).catch(function(e){console.log(e)})}},created:function(){}},n=(i("dix8"),i("KHd+")),a=Object(n.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("advTemplet",{on:{confirmFn:this.addFn}})],1)},[],!1,null,"60a3e302",null);a.options.__file="index.vue";t.default=a.exports},"7OSw":function(e,t,i){},"FL/a":function(e,t,i){},RPIl:function(e,t,i){"use strict";var o=i("FL/a");i.n(o).a},WDeH:function(e,t,i){"use strict";i("L2JU");var o=i("kfou"),n=i("DSeF"),a={name:"categoryAdd",components:{advImgCropper:o.a,PreviewImgDialog:n.a},props:{source:{type:String},form:{type:Object,default:function(){return{coin:500,layoutType:0}}}},computed:{imageUrl:function(){if(this.form.link)return this.form.link},tag:function(){return"edit"==this.source?(this.tagIds=this.form.tagIds,this.form.tagIds):[]}},data:function(){return{checkAll:!1,isIndeterminate:!0,tagList:[],tagIds:[],CropWidth:670,CropHeight:376,uploadPic:"http://www.my51share.com/boss/upload",imglink:"",visible:!1}},watch:{form:{handler:function(e,t){console.log(e)},deep:!0}},methods:{handleCheckAllChange:function(e){var t=this.tagList.map(function(e){return e.id});this.tagIds=e?t:[],console.log(this.tagIds),this.isIndeterminate=!1},handleCheckedTagsChange:function(e){console.log(e);var t=e.length;this.checkAll=t===this.tagList.length,this.isIndeterminate=t>0&&t<this.tagList.length},backFn:function(){this.$router.back()},getTagList:function(){var e=this;this.$req.get("v2/shareCategory/1/999").then(function(t){e.tagList=t.data.data.records}).catch(function(e){console.log(e)})},uploadFileFn:function(e){this.imglink=e},confirmFn:function(){this.imglink&&(this.form.link=this.imglink),this.form.tagIds=this.tagIds,this.$emit("confirmFn",this.form)}},created:function(){this.getTagList(),console.log("adTel",this.tagIds)}},r=(i("RPIl"),i("KHd+")),l=Object(r.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"form",attrs:{model:e.form,"label-position":"left","label-width":"140px"}},[i("el-form-item",{attrs:{label:"标题"}},[i("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"广告商"}},[i("el-input",{model:{value:e.form.business,callback:function(t){e.$set(e.form,"business",t)},expression:"form.business"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"app内是否显示标题"}},[i("el-radio-group",{model:{value:e.form.isTitleShow,callback:function(t){e.$set(e.form,"isTitleShow",t)},expression:"form.isTitleShow"}},[i("el-radio",{attrs:{label:0}},[e._v("不显示")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v("显示")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"广告类型"}},[i("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[i("el-radio",{attrs:{label:0}},[e._v("图片")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v("视频")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"图片/视频链接地址"}},[e.imglink?e._e():i("el-input",{model:{value:e.form.link,callback:function(t){e.$set(e.form,"link",t)},expression:"form.link"}}),e._v(" "),e.imglink?i("el-input",{model:{value:e.imglink,callback:function(t){e.imglink=t},expression:"imglink"}}):e._e()],1),e._v(" "),0==e.form.type?i("el-form-item",{attrs:{label:"上传图片生成链接"}},[i("advImgCropper",{attrs:{imageUrl:e.imageUrl},on:{uploadFileFn:e.uploadFileFn}})],1):e._e(),e._v(" "),0==e.form.type?i("el-form-item",{attrs:{label:"图片跳转的链接地址"}},[i("el-input",{model:{value:e.form.targetLink,callback:function(t){e.$set(e.form,"targetLink",t)},expression:"form.targetLink"}})],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"广告的布局类型"}},[i("el-radio-group",{model:{value:e.form.layoutType,callback:function(t){e.$set(e.form,"layoutType",t)},expression:"form.layoutType"}},[i("el-radio",{attrs:{label:0}},[e._v("详情下部")])],1)],1)],1),e._v(" "),i("section",{staticClass:"relevanceBox"},[i("p",[e._v("关联标签")]),e._v(" "),i("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),i("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),i("el-checkbox-group",{model:{value:e.tagIds,callback:function(t){e.tagIds=t},expression:"tagIds"}},e._l(e.tagList,function(t,o){return i("el-checkbox",{key:o,attrs:{label:t.id}},[e._v(e._s(t.cname)+"\n       ")])})),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(" "+e._s(e.tag)+e._s(e.tagIds))])],1),e._v(" "),i("el-row",{staticClass:"btnBox"},[i("el-button",{attrs:{type:"primary"},on:{click:e.confirmFn}},[e._v("确定")]),e._v(" "),i("el-button",{attrs:{type:"info"},on:{click:e.backFn}},[e._v("返回")])],1),e._v(" "),i("PreviewImgDialog",{attrs:{isShow:e.visible},on:{cancelFn:function(t){e.visible=!1},confirmFn:function(t){e.visible=!1}}},[i("img",{attrs:{src:e.imglink,alt:""}})])],1)},[],!1,null,null,null);l.options.__file="index.vue";t.a=l.exports},cqg4:function(e,t,i){"use strict";var o=i("yuOZ");i.n(o).a},dix8:function(e,t,i){"use strict";var o=i("7OSw");i.n(o).a},kfou:function(e,t,i){"use strict";var o=i("EJiy"),n=i.n(o),a=i("3sdr"),r=i("DSeF"),l={props:{imageUrl:{type:String,default:""},types:{type:String,default:function(){return""}}},data:function(){return{visible:!1,previews:{},fileinfo:{},uploadImgUrl:"https://www.my51share.com/boss/upload",imgUrl:"",isShowImg:!0,option:{img:"",size:1,full:!1,outputType:"png",canMove:!0,fixedBox:!1,original:!1,canMoveBox:!0,autoCrop:!0,autoCropWidth:670,autoCropHeight:376,centerBox:!0,high:!0,cropData:{},enlarge:1,mode:"contain"}}},methods:{showFn:function(){this.visible=!0},changeScale:function(e){e=e||1,this.$refs.cropper.changeScale(e)},finish:function(e){var t=this,i=new FormData;this.$refs.cropper.getCropBlob(function(e){var o=window.URL.createObjectURL(e);t.model=!0,t.modelSrc=o,i.append("multipartFile",e),t.$axios.post(t.uploadImgUrl,i,{contentType:!1,processData:!1,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){t.$success("上传成功"),t.visible=!1,t.option.img="",t.$refs.file.value="",t.isShowImg=!1,t.imgUrl=e.data.data,t.$emit("uploadFileFn",e.data.data,t.types)}).catch(function(e){console.log(e),t.$wran("上传失败"),t.visible=!1})})},down:function(e){var t=this,i=document.createElement("a");i.download="author-img","blob"===e?this.$refs.cropper.getCropBlob(function(e){t.downImg=window.URL.createObjectURL(e),i.href=window.URL.createObjectURL(e),i.click()}):this.$refs.cropper.getCropData(function(e){t.downImg=e,i.href=e,i.click()})},confirmFn:function(){this.finish()},uploadImg1:function(e,t){var i=this,o=e.target.files[0];if(console.log("one",o.name),!/\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(e.target.value))return this.$wran("图片类型必须是.gif,jpeg,jpg,png中的一种"),!1;var a=new FileReader;a.onload=function(e){var o=void 0;o="object"===n()(e.target.result)?window.URL.createObjectURL(new Blob([e.target.result])):e.target.result,1===t?(i.option.img=o,console.log(i.option.img)):2===t&&(i.example2.img=o)},a.readAsArrayBuffer(o)},realTime:function(e){this.previews=e},imgLoad:function(e){},cropMoving:function(e){this.option.cropData=e}},components:{VueCropper:a.a,Dialog:r.a},created:function(){}},s=(i("cqg4"),i("KHd+")),c=Object(s.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("div",{staticClass:"coverImgBox"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.showFn}},[e._v("点击上传")]),e._v(" "),e.imgUrl?i("img",{staticClass:"imgCover",attrs:{src:e.imgUrl,alt:""}}):e._e(),e._v(" "),e.imageUrl&&e.isShowImg?i("img",{attrs:{src:e.imageUrl,alt:""}}):e._e()],1),e._v(" "),i("Dialog",{attrs:{width:"80%",isShow:e.visible},on:{cancelFn:function(t){e.visible=!1},confirmFn:e.confirmFn}},[i("label",{staticClass:"btn",attrs:{for:"uploads1"}},[e._v("选择图片")]),e._v(" "),i("input",{ref:"file",staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"uploads1",accept:"image/png, image/jpeg, image/gif, image/jpg"},on:{change:function(t){e.uploadImg1(t,1)}}}),e._v(" "),i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.changeScale(1)}}},[e._v("+")]),e._v(" "),i("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){e.changeScale(-1)}}},[e._v("-")]),e._v(" "),i("el-button",{attrs:{plain:""},on:{click:function(t){e.down("blob")}}},[e._v("下载")]),e._v(" "),i("div",{staticClass:"dialogCover"},[i("vueCropper",{ref:"cropper",attrs:{img:e.option.img,outputSize:e.option.size,outputType:e.option.outputType,info:!0,full:e.option.full,canMove:e.option.canMove,canMoveBox:e.option.canMoveBox,fixedBox:e.option.fixedBox,original:e.option.original,autoCrop:e.option.autoCrop,autoCropWidth:e.option.autoCropWidth,autoCropHeight:e.option.autoCropHeight,centerBox:e.option.centerBox,high:e.option.high,infoTrue:e.option.infoTrue,enlarge:e.option.enlarge,mode:e.option.mode},on:{realTime:e.realTime,imgLoad:e.imgLoad,cropMoving:e.cropMoving}}),e._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"show-preview",style:{width:e.previews.w+"px",height:e.previews.h+"px",overflow:"hidden",margin:"5px"}},[i("div",{style:e.previews.div},[i("img",{style:e.previews.img,attrs:{src:e.previews.url}})])])])],1)],1)],1)},[],!1,null,null,null);c.options.__file="advImgCropper.vue";t.a=c.exports},yuOZ:function(e,t,i){}}]);