(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-607e"],{"73UT":function(e,t,o){"use strict";o.r(t);var i={name:"",components:{advTemplet:o("WDeH").a},computed:{userInfo:function(){return this.$store.getters.userInfo}},data:function(){return{}},methods:{addFn:function(e){var t=this,o=JSON.parse(this.userInfo).realname;e.creator=o,this.$req.post("v2/shareAdv/add",e).then(function(e){console.log(e),t.$success("添加成功"),t.$router.back()}).catch(function(e){console.log(e)})}},created:function(){}},n=(o("dix8"),o("ZrdR")),a=Object(n.a)(i,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("advTemplet",{on:{confirmFn:this.addFn}})],1)},[],!1,null,"60a3e302",null);a.options.__file="index.vue";t.default=a.exports},KMXe:function(e,t,o){},RPIl:function(e,t,o){"use strict";var i=o("KMXe");o.n(i).a},WDeH:function(e,t,o){"use strict";o("8t5x");var i=o("kfou"),n=o("DSeF"),a={name:"categoryAdd",components:{advImgCropper:i.a,PreviewImgDialog:n.a},props:{source:{type:String},form:{type:Object,default:function(){return{coin:500,layoutType:0}}}},computed:{imageUrl:function(){if(this.form.link)return this.form.link},tag:function(){return"edit"==this.source?(this.tagIds=this.form.tagIds,this.form.tagIds):[]}},data:function(){return{checkAll:!1,isIndeterminate:!0,tagList:[],tagIds:[],CropWidth:670,CropHeight:376,uploadPic:"http://www.my51share.com/boss/upload",imglink:"",visible:!1}},watch:{form:{handler:function(e,t){console.log(e)},deep:!0}},methods:{handleCheckAllChange:function(e){var t=this.tagList.map(function(e){return e.id});this.tagIds=e?t:[],console.log(this.tagIds),this.isIndeterminate=!1},handleCheckedTagsChange:function(e){console.log(e);var t=e.length;this.checkAll=t===this.tagList.length,this.isIndeterminate=t>0&&t<this.tagList.length},backFn:function(){this.$router.back()},getTagList:function(){var e=this;this.$req.get("v2/shareCategory/1/999").then(function(t){e.tagList=t.data.data.records}).catch(function(e){console.log(e)})},uploadFileFn:function(e){this.imglink=e},confirmFn:function(){this.imglink&&(this.form.link=this.imglink),this.form.tagIds=this.tagIds,this.$emit("confirmFn",this.form)}},created:function(){this.getTagList(),console.log("adTel",this.tagIds)}},r=(o("RPIl"),o("ZrdR")),l=Object(r.a)(a,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"form",attrs:{model:e.form,"label-position":"left","label-width":"140px"}},[o("el-form-item",{attrs:{label:"标题"}},[o("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"广告商"}},[o("el-input",{model:{value:e.form.business,callback:function(t){e.$set(e.form,"business",t)},expression:"form.business"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"app内是否显示标题"}},[o("el-radio-group",{model:{value:e.form.isTitleShow,callback:function(t){e.$set(e.form,"isTitleShow",t)},expression:"form.isTitleShow"}},[o("el-radio",{attrs:{label:0}},[e._v("不显示")]),e._v(" "),o("el-radio",{attrs:{label:1}},[e._v("显示")])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"广告类型"}},[o("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[o("el-radio",{attrs:{label:0}},[e._v("图片")]),e._v(" "),o("el-radio",{attrs:{label:1}},[e._v("视频")])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"图片/视频链接地址"}},[e.imglink?e._e():o("el-input",{model:{value:e.form.link,callback:function(t){e.$set(e.form,"link",t)},expression:"form.link"}}),e._v(" "),e.imglink?o("el-input",{model:{value:e.imglink,callback:function(t){e.imglink=t},expression:"imglink"}}):e._e()],1),e._v(" "),0==e.form.type?o("el-form-item",{attrs:{label:"上传图片生成链接"}},[o("advImgCropper",{attrs:{imageUrl:e.imageUrl},on:{uploadFileFn:e.uploadFileFn}})],1):e._e(),e._v(" "),0==e.form.type?o("el-form-item",{attrs:{label:"图片跳转的链接地址"}},[o("el-input",{model:{value:e.form.targetLink,callback:function(t){e.$set(e.form,"targetLink",t)},expression:"form.targetLink"}})],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"广告的布局类型"}},[o("el-radio-group",{model:{value:e.form.layoutType,callback:function(t){e.$set(e.form,"layoutType",t)},expression:"form.layoutType"}},[o("el-radio",{attrs:{label:0}},[e._v("详情下部")])],1)],1)],1),e._v(" "),o("section",{staticClass:"relevanceBox"},[o("p",[e._v("关联标签")]),e._v(" "),o("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),o("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),o("el-checkbox-group",{model:{value:e.tagIds,callback:function(t){e.tagIds=t},expression:"tagIds"}},e._l(e.tagList,function(t,i){return o("el-checkbox",{key:i,attrs:{label:t.id}},[e._v(e._s(t.cname)+"\n       ")])})),e._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(" "+e._s(e.tag)+e._s(e.tagIds))])],1),e._v(" "),o("el-row",{staticClass:"btnBox"},[o("el-button",{attrs:{type:"primary"},on:{click:e.confirmFn}},[e._v("确定")]),e._v(" "),o("el-button",{attrs:{type:"info"},on:{click:e.backFn}},[e._v("返回")])],1),e._v(" "),o("PreviewImgDialog",{attrs:{isShow:e.visible},on:{cancelFn:function(t){e.visible=!1},confirmFn:function(t){e.visible=!1}}},[o("img",{attrs:{src:e.imglink,alt:""}})])],1)},[],!1,null,null,null);l.options.__file="index.vue";t.a=l.exports},cqg4:function(e,t,o){"use strict";var i=o("hVas");o.n(i).a},dix8:function(e,t,o){"use strict";var i=o("mhJW");o.n(i).a},hVas:function(e,t,o){},kfou:function(e,t,o){"use strict";var i=o("Q2cO"),n=o.n(i),a=o("3sdr"),r=o("DSeF"),l={props:{imageUrl:{type:String,default:""}},data:function(){return{visible:!1,previews:{},fileinfo:{},uploadImgUrl:"https://www.my51share.com/boss/upload",imgUrl:"",isShowImg:!0,option:{img:"",size:1,full:!1,outputType:"png",canMove:!0,fixedBox:!1,original:!1,canMoveBox:!0,autoCrop:!0,autoCropWidth:670,autoCropHeight:376,centerBox:!0,high:!0,cropData:{},enlarge:1,mode:"contain"}}},methods:{showFn:function(){this.visible=!0},changeScale:function(e){e=e||1,this.$refs.cropper.changeScale(e)},finish:function(e){var t=this,o=new FormData;this.$refs.cropper.getCropBlob(function(e){var i=window.URL.createObjectURL(e);t.model=!0,t.modelSrc=i,o.append("multipartFile",e),t.$axios.post(t.uploadImgUrl,o,{contentType:!1,processData:!1,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){t.$success("上传成功"),t.visible=!1,t.option.img="",t.isShowImg=!1,t.imgUrl=e.data.data,t.$emit("uploadFileFn",e.data.data)}).catch(function(e){console.log(e),t.$wran("上传失败"),t.visible=!1})})},down:function(e){var t=this,o=document.createElement("a");o.download="author-img","blob"===e?this.$refs.cropper.getCropBlob(function(e){t.downImg=window.URL.createObjectURL(e),o.href=window.URL.createObjectURL(e),o.click()}):this.$refs.cropper.getCropData(function(e){t.downImg=e,o.href=e,o.click()})},confirmFn:function(){this.finish()},uploadImg1:function(e,t){var o=this,i=e.target.files[0];if(console.log("one",i.name),!/\.(gif|jpg|jpeg|png|bmp|GIF|JPG|PNG)$/.test(e.target.value))return this.$wran("图片类型必须是.gif,jpeg,jpg,png中的一种"),!1;var a=new FileReader;a.onload=function(e){var i=void 0;i="object"===n()(e.target.result)?window.URL.createObjectURL(new Blob([e.target.result])):e.target.result,1===t?(o.option.img=i,console.log(o.option.img)):2===t&&(o.example2.img=i)},a.readAsArrayBuffer(i)},realTime:function(e){this.previews=e},imgLoad:function(e){},cropMoving:function(e){this.option.cropData=e}},components:{VueCropper:a.a,Dialog:r.a},created:function(){}},s=(o("cqg4"),o("ZrdR")),c=Object(s.a)(l,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",[o("div",{staticClass:"coverImgBox"},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.showFn}},[e._v("点击上传")]),e._v(" "),e.imgUrl?o("img",{staticClass:"imgCover",attrs:{src:e.imgUrl,alt:""}}):e._e(),e._v(" "),e.imageUrl&&e.isShowImg?o("img",{attrs:{src:e.imageUrl,alt:""}}):e._e()],1),e._v(" "),o("Dialog",{attrs:{width:"80%",isShow:e.visible},on:{cancelFn:function(t){e.visible=!1},confirmFn:e.confirmFn}},[o("label",{staticClass:"btn",attrs:{for:"uploads1"}},[e._v("选择图片")]),e._v(" "),o("input",{ref:"file",staticStyle:{position:"absolute",clip:"rect(0 0 0 0)"},attrs:{type:"file",id:"uploads1",accept:"image/png, image/jpeg, image/gif, image/jpg"},on:{change:function(t){e.uploadImg1(t,1)}}}),e._v(" "),o("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.changeScale(1)}}},[e._v("+")]),e._v(" "),o("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){e.changeScale(-1)}}},[e._v("-")]),e._v(" "),o("el-button",{attrs:{plain:""},on:{click:function(t){e.down("blob")}}},[e._v("下载")]),e._v(" "),o("div",{staticClass:"dialogCover"},[o("vueCropper",{ref:"cropper",attrs:{img:e.option.img,outputSize:e.option.size,outputType:e.option.outputType,info:!0,full:e.option.full,canMove:e.option.canMove,canMoveBox:e.option.canMoveBox,fixedBox:e.option.fixedBox,original:e.option.original,autoCrop:e.option.autoCrop,autoCropWidth:e.option.autoCropWidth,autoCropHeight:e.option.autoCropHeight,centerBox:e.option.centerBox,high:e.option.high,infoTrue:e.option.infoTrue,enlarge:e.option.enlarge,mode:e.option.mode},on:{realTime:e.realTime,imgLoad:e.imgLoad,cropMoving:e.cropMoving}}),e._v(" "),o("div",{staticClass:"right"},[o("div",{staticClass:"show-preview",style:{width:e.previews.w+"px",height:e.previews.h+"px",overflow:"hidden",margin:"5px"}},[o("div",{style:e.previews.div},[o("img",{style:e.previews.img,attrs:{src:e.previews.url}})])])])],1)],1)],1)},[],!1,null,null,null);c.options.__file="advImgCropper.vue";t.a=c.exports},mhJW:function(e,t,o){}}]);