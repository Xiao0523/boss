(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4334"],{"0Afi":function(t,e,a){"use strict";var n=a("B2JU");a.n(n).a},"9pNs":function(t,e,a){"use strict";var n={name:"goTop",data:function(){return{scrollTop:"",goTopShow:!1}},methods:{handleScroll:function(){this.scrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,this.scrollTop>500&&(this.goTopShow=!0)},goTop:function(){var t=null,e=this;cancelAnimationFrame(t),t=requestAnimationFrame(function a(){e.scrollTop>0?(e.scrollTop-=500,document.body.scrollTop=document.documentElement.scrollTop=e.scrollTop,t=requestAnimationFrame(a)):(cancelAnimationFrame(t),e.goTopShow=!1)})}},mounted:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},i=(a("eH+3"),a("KHd+")),s=Object(i.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"goTop"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.goTopShow,expression:"goTopShow"}],staticClass:"goTop",on:{click:this.goTop}},[e("i",{staticClass:"goTopIcon"})])])},[],!1,null,"5a551558",null);s.options.__file="index.vue";e.a=s.exports},B2JU:function(t,e,a){},DSeF:function(t,e,a){"use strict";var n={name:"Dialog_BOX",components:{},props:{isShow:{type:Boolean,default:!1},title:{type:String,default:"提示"},width:{type:String,default:"50%"}},computed:{},data:function(){return{}},methods:{cancelFn:function(){this.$emit("cancelFn")},confirmFn:function(){this.$emit("confirmFn")}},created:function(){}},i=(a("0Afi"),a("KHd+")),s=Object(i.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.title,visible:t.isShow,"close-on-click-modal":!1,"show-close":!1,width:t.width},on:{"update:visible":function(e){t.isShow=e}}},[t._t("del"),t._v(" "),t._t("sort"),t._v(" "),t._t("upload"),t._v(" "),t._t("transfer"),t._v(" "),t._t("default"),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelFn}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmFn}},[t._v("确 定")])],1)],2)},[],!1,null,"abb9f780",null);s.options.__file="index.vue";e.a=s.exports},EEiy:function(t,e,a){},Fkf8:function(t,e,a){},"RU/L":function(t,e,a){a("Rqdy");var n=a("WEpk").Object;t.exports=function(t,e,a){return n.defineProperty(t,e,a)}},Rqdy:function(t,e,a){var n=a("Y7ZC");n(n.S+n.F*!a("jmDH"),"Object",{defineProperty:a("2faE").f})},SEkw:function(t,e,a){t.exports={default:a("RU/L"),__esModule:!0}},SMMm:function(t,e,a){"use strict";var n=a("Uwh3"),i={props:{currentPage:{type:Number},pageSizes:{type:Array,default:function(){return[]}},pageSize:{type:Number},total:{type:Number}},components:{},data:function(){return{isShow:!1}},watch:{total:function(t){console.log("total",t),0!=t&&(this.isShow=!0)}},methods:{handleSizeChange:function(t){Object(n.c)("currentSize",t);var e=Object(n.b)("currentSize");this.$emit("sizeChange",e)},handleCurrentChange:function(t){Object(n.c)("currentPage",t);var e=Object(n.b)("currentPage");this.$emit("currentChange",e)}},mounted:function(){},updated:function(){console.log("分页组件",this.currentPage),console.log("分页组件",this.pageSize)},created:function(){}},s=(a("XCpr"),a("KHd+")),o=Object(s.a)(i,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pageBox"},[this.isShow?e("el-pagination",{attrs:{"current-page":this.currentPage,pageSizes:[10,50,100,200,300,400,500],"page-size":this.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:this.total},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}}):this._e()],1)},[],!1,null,"21d651f8",null);o.options.__file="index.vue";e.a=o.exports},TsEw:function(t,e,a){},"V2+i":function(t,e,a){"use strict";var n=a("Fkf8");a.n(n).a},XCpr:function(t,e,a){"use strict";var n=a("EEiy");a.n(n).a},YEIV:function(t,e,a){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(a("SEkw"));e.default=function(t,e,a){return e in t?(0,n.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},"eH+3":function(t,e,a){"use strict";var n=a("kRMI");a.n(n).a},"iSA+":function(t,e,a){"use strict";var n=a("TsEw");a.n(n).a},kRMI:function(t,e,a){},rn9f:function(t,e,a){"use strict";a.r(e);var n,i=a("XJYT"),s=a("YEIV"),o=a.n(s),r=a("DSeF"),c=a("Uwh3"),l={name:"searchNav",props:{from:{type:String},ids:{type:Array},param:{type:Object,default:function(){return{creator:"",startTime:"",endTime:"",isShow:"",pageNum:1,pageSize:10}}}},components:{menusDialog:r.a,Dialog:r.a},computed:{userInfo:function(){return this.$store.getters.userInfo}},data:function(){return{visible:!1,visibleDialog:!1,startTime:"",endTime:"",transferData:[],selectTransfer:[],displayStatus:[{isShow:1,text:"已上架"},{isShow:0,text:"未上架"}],DisplayBtnText:"",isShowDisplayBtn:"",tagList:[]}},watch:{},methods:(n={delsFn:function(){this.$emit("delsFn")},updateTimeFn:function(){if(!this.ids.length)return this.$wran("请先勾选浮窗广告");this.visibleDialog=!0},updateBeginTimeFn:function(t){t&&(this.startTime=t)},updateEndTimeFn:function(t){t&&(this.endTime=t)},confirmUpdateTimeFn:function(){var t=this;this.$req.patch("updateMarketingTime",{ids:this.ids,startTime:this.startTime,endTime:this.endTime}).then(function(e){t.$success(e.data.message),t.visibleDialog=!1,t.$emit("updateListFn")}).catch(function(e){t.visibleDialog=!1,console.log(e)})},goTagPageFn:function(){if(!this.ids.length)return this.$wran("请先选择广告");this.$router.push("/categoryManager/categoryList")},resettingFn:function(){Object(c.a)("param"),Object(c.a)("currentPage"),this.$emit("updateListFn")},displayChangeFn:function(){""!==this.param.isShow&&(-2!=this.param.isShow&&(this.isShowDisplayBtn=!0,this.param.isShow=this.param.isShow,1==this.param.isShow?this.DisplayBtnText="下架":this.DisplayBtnText="上架"),this.searchFn())},putawayFn:function(){var t=this,e=null;return this.ids.length?""===this.param.isShow?this.$wran("请先选择上架状态"):(1==this.param.isShow?e=0:0==this.param.isShow&&(e=1),void this.$req.post("v2/shareAdv/PutAwayAdv",{ids:this.ids,state:e}).then(function(e){t.$success(e.data.message),t.$emit("updateListFn")}).catch(function(t){console.log(t)})):this.$wran("请先勾选文章")},RelationTagFn:function(){if(!this.ids.length)return this.$wran("请先选择广告");this.visible=!0,this.transferData=[],this.generateData()},confirmFn:function(){this.relevanceTags()},generateData:function(){for(var t=this.tagList.length,e=0;e<t;e++){var a=this.tagList[e];this.transferData.push({key:a.id,label:a.cname})}},transferChange:function(t,e,a){console.log(t,e,a),"right"==e&&(this.selectTransfer=a)},getTagFn:function(){var t=this;this.$req.get("v2/shareCategory/1/999").then(function(e){t.tagList=e.data.data.records}).catch(function(t){console.log(t)})},relevanceTags:function(){var t=this;if(0==this.selectTransfer.length)return this.$wran("关联标签不能为空");var e=JSON.parse(this.userInfo).realname;this.$req.post("v2/shareAdv/ContactAdvTag",{tagIds:this.selectTransfer,advIds:this.ids,creator:e}).then(function(e){t.$success(e.data.message),t.visible=!1}).catch(function(e){console.log(e),t.visible=!1})},inputFn:function(){"13"==event.keyCode&&this.param.creator&&this.searchFn()},titleFn:function(){"13"==event.keyCode&&this.param.title&&this.searchFn()},dateChangeBeginTime:function(t){t&&(this.param.startTime=t,this.searchFn())},dateChangeEndTime:function(t){t&&(this.param.endTime=t,this.searchFn())},selectedtTagFn:function(t){this.tagId=t},addFn:function(){switch(this.from){case"flotAdvList":this.$router.push("/flotAdv/flotAdvAdd")}}},o()(n,"delsFn",function(){this.$emit("delsFn")}),o()(n,"searchFn",function(t){switch(this.from){case"advList":"v2/shareAdv/fuzzySearchAdvertise"}for(var e in this.param)""!==this.param[e]&&null!==this.param[e]||delete this.param[e];this.param.pageNum=1,Object(c.c)("param",this.param),this.$emit("searchFn",Object(c.b)("param"))}),n),created:function(){this.getTagFn()}},u=(a("iSA+"),a("KHd+")),h=Object(u.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入创建人",clearable:""},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.inputFn(e):null}},model:{value:t.param.creator,callback:function(e){t.$set(t.param,"creator",e)},expression:"param.creator"}}),t._v(" "),a("el-input",{staticClass:"input",attrs:{placeholder:"请输入标题",clearable:""},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.titleFn(e):null}},model:{value:t.param.title,callback:function(e){t.$set(t.param,"title",e)},expression:"param.title"}}),t._v(" "),t.DisplayBtnText?a("el-button",{on:{click:t.putawayFn}},[t._v(t._s(t.DisplayBtnText))]):t._e(),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:t.resettingFn}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addFn}},[t._v("添加浮窗内容")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.delsFn}},[t._v("批量删除")])],1),t._v(" "),a("menusDialog",{attrs:{isShow:t.visible,title:"关联标签"},on:{cancelFn:function(e){t.visible=!1},confirmFn:t.confirmFn}},[a("el-transfer",{attrs:{data:t.transferData,titles:["所有标签列表","关联标签列表"],"button-texts":["移除","添加"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"}},on:{change:t.transferChange},model:{value:t.selectTransfer,callback:function(e){t.selectTransfer=e},expression:"selectTransfer"}})],1),t._v(" "),a("Dialog",{attrs:{isShow:t.visibleDialog},on:{cancelFn:function(e){t.visibleDialog=!1},confirmFn:t.confirmUpdateTimeFn}},[a("section",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始日期","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:t.updateBeginTimeFn},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}}),t._v(" "),a("el-date-picker",{attrs:{type:"datetime",placeholder:"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:t.updateEndTimeFn},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)])],1)},[],!1,null,"7aee0a28",null);h.options.__file="flotAdvNav.vue";var d=h.exports,p=a("SMMm"),m=a("9pNs"),f={name:"flotAdvList",components:{flotAdvNav:d,Dialog:r.a,pageNum:p.a,goTop:m.a},computed:{userInfo:function(){return this.$store.getters.userInfo}},data:function(){return{searchParame:{},listData:[],tableIdArr:[],getRowKeys:function(t){return t.id},ids:[],startDate:"",endDate:"",totalNum:null,pageNo:1,pageSize:10,visible:!1,tabHeader:{"background-color":"#F4F4F4",color:"#666666","border-top":"1px solid #BBBBBB","border-bottom":"1px solid #BBBBBB","font-size":"16px","text-align":"center"}}},filters:{},methods:{backAddArtFn:function(){this.$router.back()},updateListFn:function(){this.ids=[],this.$refs.multipleTable.clearSelection(),this.initData()},searchFn:function(t){this.searchParame=t,console.log("父组件接受的参数",this.searchParame),this.initData()},sizeChangeFn:function(t){this.searchParame.pageSize=t;var e=Object(c.b)("param");"undefined"!==e&&void 0!==e||(e={}),e.pageSize=this.searchParame.pageSize,e.pageNum=this.searchParame.pageNum,Object(c.c)("param",e),console.log("每页条数改变时触发："+this.searchParame.pageSize),this.initData()},currentChangeFn:function(t){console.log(this.searchParame),this.searchParame.pageNum=t;var e=Object(c.b)("param");"undefined"!==e&&void 0!==e||(e={}),e.pageSize=this.searchParame.pageSize,e.pageNum=this.searchParame.pageNum,Object(c.c)("param",e),console.log("页码改变触发"+this.searchParame.pageNo),this.initData()},confirmFn:function(){this.visible=!1;var t=this.ids;this.$req.post("v2.1/deleteMarketing",{ids:t}).then(function(t){0==t.data.code&&Object(i.Message)({message:"删除成功",type:"success"}),window.location.reload()}).catch(function(t){console.log(t)})},delsFn:function(){this.ids.length&&(this.visible=!0)},SelectionChange:function(t){this.ids=t.map(function(t){return t.id}),console.log("选中的id",this.ids)},changeFn:function(t,e,a){var n=this,i=(JSON.parse(this.userInfo).realname,[]);i.push(a.id);var s={ids:i,state:t};this.$req.post("v2/shareAdv/PutAwayAdv",s).then(function(t){n.$success(t.data.message)}).catch(function(t){return console.log(t)})},handleEdit:function(t,e){this.$router.push({path:"/advManager/flotAdvDetails",query:{id:e.id}}),Object(c.c)("paramCopy",this.searchParame)},handleDelete:function(t,e){this.visible=!0;var a=[];a.push(e.id),this.ids=a},initData:function(){var t=this;this.searchParame=Object(c.b)("param"),"undefined"!==this.searchParame&&void 0!==this.searchParame||(this.searchParame={pageNum:1,pageSize:10}),this.$req.post("v2.1/getMarketing",this.searchParame).then(function(e){console.log(e),t.totalNum=e.data.data.total,t.listData=e.data.data.records,t.listData.map(function(t,e){t.selectionNumber&&t.selectionNumber.length>0&&(t.selectionNumber=t.selectionNumber.join(",")),t.tagName&&t.tagName.length>0&&(t.tagName=t.tagName.join(","))}),t.tableIdArr=t.listData.map(function(t){return t.id})}).catch(function(t){console.log(t)})}},created:function(){this.initData()},beforeRouteLeave:function(t,e,a){"flotAdvDetails"!=t.name&&(Object(c.a)("param"),Object(c.a)("currentPage")),a()}},g=(a("V2+i"),Object(u.a)(f,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("flotAdvNav",{attrs:{from:"flotAdvList",param:t.searchParame,ids:t.ids},on:{searchFn:t.searchFn,delsFn:t.delsFn,updateListFn:t.updateListFn}}),t._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table-box",staticStyle:{width:"100%"},attrs:{data:t.listData,"empty-text":"暂无数据","max-height":"700","row-key":t.getRowKeys,border:"","header-cell-style":t.tabHeader},on:{"selection-change":t.SelectionChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"creator",label:"创建人"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间","min-width":"120",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.createTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tagName",label:"关联标签","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"selectionNumber",label:"循环时间","min-width":"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"operation-box"},[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])],1)]}}])})],1),t._v(" "),a("div",{staticClass:"pageNumBox"},[a("pageNum",{attrs:{currentPage:t.searchParame.pageNum,pageSize:t.searchParame.pageSize,total:t.totalNum},on:{sizeChange:t.sizeChangeFn,currentChange:t.currentChangeFn}})],1),t._v(" "),a("goTop"),t._v(" "),a("Dialog",{attrs:{isShow:t.visible},on:{cancelFn:function(e){t.visible=!1},confirmFn:t.confirmFn}},[a("span",{attrs:{slot:"del"},slot:"del"},[t._v("删除操作不可恢复，确认删除？")])])],1)},[],!1,null,"c6a256e4",null));g.options.__file="flotAdvList.vue";e.default=g.exports}}]);